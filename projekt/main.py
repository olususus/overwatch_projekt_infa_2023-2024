# importy i inne

import random
# importy z plik√≥w
from characters import Character, Sombra, Reinhardt, Widowmaker, Freddy, test, Ana, Zarya, dodatkowefunkcjepostaci
from enemies import Bastion, Kiriko, Roadhog, Echo, Cassidy, Lucio, Ashe, Springtrap, Hanzo, Roadhog
from boss import Orisa, Mauga
from straszaki import toggle_color, scary_effect, mrygnij, blink_random_characters, apply_glitch_effect, gowno, generate_corrupted_text, clear_screen

#importy modu≈Ç√≥w pythona

import music
import pygame
import time
import sys
import description
import webbrowser
from colorama import init, Fore, Back, Style
import os
import threading
import pickle
import json
import subprocess

game_started = False


bossy = [Mauga(), Orisa()]

# PoczƒÖtek gry

def display_main_menu():
    print("\n--- MENU G≈Å√ìWNE ---")
    print("1. Rozpocznij grƒô")
    print("2. Zasady gry")
    print("3. Leaderboard")
    print("4. Wyj≈õcie")
    print("--------------------")

def show_game_rules():
    clear_console()
    print("Zasady gry:")
    print("Twoim celem jest pokonanie przeciwnik√≥w, a nastƒôpnie g≈Ç√≥wnego bossa Orisy lub Maugi.")
    print("Je≈õli przegrasz, odczujesz niespodziankƒô...")
    print("W trakcie gry mo≈ºesz wybraƒá jednego z dostƒôpnych bohater√≥w: Sombra, Reinhardt, Widowmaker lub Ana.")
    print("Ka≈ºdy bohater ma unikalne umiejƒôtno≈õci i zdolno≈õci specjalne.")
    print("Podczas walki mo≈ºesz atakowaƒá przeciwnik√≥w, u≈ºywaƒá umiejƒôtno≈õci specjalnych lub leczyƒá siƒô.")
    print("Pamiƒôtaj o zarzƒÖdzaniu swojƒÖ ilo≈õciƒÖ many i zdrowia.")
    print("Powodzenia!")
    input("Naci≈õnij Enter, aby wr√≥ciƒá do menu...")


def show_loading_screen():
    screen.fill(background_color)
    
    # Losowy czas trwania ≈Çadowania miƒôdzy 1 a 5 sekundami
    loading_time = random.uniform(1, 5)
    
    # PoczƒÖtkowy czas
    start_time = time.time()
    
    font = pygame.font.Font(None, 36)
    loading_text = font.render("≈Åadowanie...", True, (255, 255, 255))
    screen.blit(loading_text, (screen_width // 2 - loading_text.get_width() // 2, 200))
    pygame.display.flip()

    while time.time() - start_time < loading_time:
        # Tutaj mo≈ºesz dodaƒá dowolne operacje ≈Çadowania, np. wczytywanie zasob√≥w

        # Aktualizacja ekranu ≈Çadowania (np. pasek postƒôpu)
        postep = (time.time() - start_time) / loading_time
        pygame.draw.rect(screen, (255, 255, 255), (100, 300, postep * 600, 20))
        pygame.display.update()


# Funkcja do zapisywania wynik√≥w
def get_player_nickname():
    nickname = input("Podaj sw√≥j nick: ")
    return nickname

def load_leaderboard():
    try:
        with open("leaderboard.json", "r") as file:
            leaderboard = json.load(file)
    except FileNotFoundError:
        leaderboard = []
    return leaderboard

def save_leaderboard(leaderboard):
    with open("leaderboard.json", "w") as file:
        json.dump(leaderboard, file, indent=2)

def update_leaderboard(player_name, defeated_enemies, manas):
    leaderboard = load_leaderboard()
    leaderboard.append({"player_name": player_name, "defeated_enemies": defeated_enemies, "mana": manas})
    leaderboard.sort(key=lambda x: x["defeated_enemies"], reverse=True)
    save_leaderboard(leaderboard)

def display_leaderboard():
    leaderboard = load_leaderboard()
    print("Leaderboard:")
    for idx, entry in enumerate(leaderboard, start=1):
        print(f"{idx}. {entry['player_name']} - {entry['defeated_enemies']} defeated enemies")


def rozwal_gre():
    print('kys')
    sys.exit

from colorama import init, Fore, Back, Style


# Inicjalizacja modu≈Çu Colorama

init(autoreset=True)

def clear_console1():
    # Wyczy≈õƒá konsolƒô
    print("\033c")

def print_color_text(text, color):
    # Wydrukuj kolorowy tekst
    print(color + text)

def cinematic_effect(text, delay):
    clear_console1()
    print_color_text(text, Fore.WHITE + Back.BLACK + Style.BRIGHT)
    time.sleep(delay)


# Funkcja do animowanego tekstu
def animated_text(text, delay=0.1):
    for color in [Fore.RED, Fore.GREEN, Fore.YELLOW, Fore.BLUE, Fore.MAGENTA, Fore.CYAN]:
        print(f"{color}{text}")
        time.sleep(delay)


# Funkcja do pokazywania healthbaru
def display_health_bar(character):
    max_health = character.max_health
    current_health = character.current_health
    bar_length = 10
    health_percentage = current_health / max_health

    # Sprawd≈∫, czy zdrowie jest poni≈ºej 15% i zmie≈Ñ kolor tekstu na czerwony
    if health_percentage < 0.15:
        color_code = "\033[91m"  # ANSI Escape Code dla czerwonego koloru
    elif health_percentage < 0.50:
        color_code = "\033[93m"  # ANSI Escape Code dla ≈º√≥≈Çtego koloru
    elif health_percentage > 0.51:
        color_code = "\033[92m"  # ANSI Escape Code dla zielonego koloru
    else:
        color_code = ""  # Domy≈õlny kolor

    health_bar = '‚ñà' * int(bar_length * health_percentage)
    empty_bar = '‚ñí' * (bar_length - len(health_bar))

    # Wydrukuj pasek zdrowia z odpowiednim kolorem
    print(f"{character.name}: {color_code}{health_bar}{empty_bar} {current_health} HP\033[0m")

    if isinstance(character, Character):
        max_mana = character.max_mana
        current_mana = character.current_mana
        mana_bar = '-' * int(bar_length * (current_mana / max_mana))
        empty_mana_bar = '.' * (bar_length - len(mana_bar))
        print(f"Mana: {mana_bar}{empty_mana_bar} ({current_mana} Mana)")

# Animowane teksty itp.

def animated_loading():
    frames = ["[      ]", "[=     ]", "[==    ]", "[===   ]", "[ ===  ]", "[  === ]", "[   == ]", "[    = ]","[     =]"]
    for frame in frames:
        sys.stdout.write('\r' + 'Wysy≈Çanie... ' + frame)
        sys.stdout.flush()
        time.sleep(0.2)

def animate_text(text, delay=0.03):
    for char in text:
        sys.stdout.write(char)
        sys.stdout.flush()
        time.sleep(delay)

def clear_console():
    os.system('cls' if os.name == 'nt' else 'clear')

def animate_airplane():
    airplane = ">===‚úà===<"
    width = 50
    position = -len(airplane)  # Inicjalizacja pozycji samolotu poza lewƒÖ krawƒôdziƒÖ konsoli
    while position < width:
        clear_console()
        print(" " * position + airplane)
        position += 1
        time.sleep(0.1)

def animate_fire(duration=3):
    width = 50  # Szeroko≈õƒá konsoli
    fire = "üî•"  # Symbol ognia

    # Przygotuj poczƒÖtkowƒÖ pozycjƒô ognia poza lewƒÖ krawƒôdziƒÖ konsoli
    position = -1
    while position < width:
        clear_console()
        print(" " * position + fire)
        position += 1
        time.sleep(0.1)

    # Zatrzymaj ognia przez podany czas
    time.sleep(duration)

    # Animacja ga≈õniƒôcia ognia
    while position > -len(fire):
        clear_console()
        print(" " * position + fire)
        position -= 1
        time.sleep(0.1)

logo_frames = [
    """
    ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ä‚¢Ñ‚¢¢‚†¢‚°ï‚¢£‚†ö‚°î‚¢£‚†é‚°î‚°†‚†§‚¢Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
    ‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚£æ‚£ß‚°à‚¢±‚†™‚¢¥‚†å‚†ì‚†à‚†Ç‚†Ä‚†Ä‚†ô‚†à‚†í‚†°‚¢û‚°∏‚°∞‚¢Å‚£¥‚£∑‚£Ñ‚†Ä‚†Ä
    ‚†Ä‚£º‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°Ü‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚£ø‚£ø‚£ø‚£ø‚£¶‚†Ä
    ‚¢∏‚£ø‚£ø‚£ø‚£ø‚£ø‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ü‚¢∞‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚£ø‚£ø‚£ø‚£ø‚£ß
    ‚£ø‚£ø‚£ø‚£ø‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚°á‚¢∏‚£∑‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£ø‚£ø‚£ø‚£ø
    ‚£ø‚£ø‚£ø‚£ø‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚£ø‚°á‚¢∏‚£ø‚£ß‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£ø‚£ø‚£ø‚£ø
    ‚£ø‚£ø‚£ø‚£ø‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£º‚£ø‚£ø‚°á‚¢∏‚£ø‚£ø‚£∑‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£ø‚£ø‚£ø‚£ø
    ‚£ø‚£ø‚£ø‚£ø‚£á‚†Ä‚†Ä‚†Ä‚£†‚£æ‚£ø‚£ø‚£ø‚£ø‚°á‚¢∏‚£ø‚£ø‚£ø‚£ø‚£∑‚£Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£ø‚£ø‚£ø‚£ø
    ‚¢∏‚£ø‚£ø‚£ø‚£ø‚°Ñ‚£†‚£æ‚£ø‚£ø‚£ø‚£ø‚°ø‚†ã‚†Ä‚†Ä‚†ô‚¢ø‚£ø‚£ø‚£ø‚£ø‚£∑‚£Ñ‚¢†‚£ø‚£ø‚£ø‚£ø‚°á
    ‚†Ä‚¢ª‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°ø‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚¢ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°ü‚†Ä
    ‚†Ä‚†Ä‚¢ª‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°ü‚†Ä‚†Ä
    ‚†Ä‚†Ä‚†Ä‚†ô‚¢ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£∂‚£§‚£Ä‚£Ä‚£Ä‚£Ä‚£Ä‚£Ä‚£§‚£∂‚£ø‚£ø‚£ø‚£ø‚£ø‚°ø‚†ã‚†Ä‚†Ä‚†Ä
    ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚†ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚†ø‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
    ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†õ‚†ø‚†ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚†ø‚†ø‚†õ‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
    """
]

def animate_overwatch_logo():
    for frame in logo_frames:
        clear_console()
        print(frame)
        time.sleep(0.5)  # Czas wy≈õwietlania klatki



# MUZYCZNE RZECZY \/


def play_intro_music():
    pygame.mixer.init()
    pygame.mixer.music.load('paraiso.mp3')  # Wprowad≈∫ nazwƒô lub ≈õcie≈ºkƒô do pliku d≈∫wiƒôkowego
    pygame.mixer.music.play()

def play_boss_music():
    pygame.mixer.init()
    pygame.mixer.music.load('boss.mp3')  # Wprowad≈∫ nazwƒô lub ≈õcie≈ºkƒô do pliku d≈∫wiƒôkowego bosza
    pygame.mixer.music.play()

def play_sombra_sound():
    pygame.mixer.init()
    pygame.mixer.music.load('sombra.ogg')  # Wprowad≈∫ nazwƒô lub ≈õcie≈ºkƒô do pliku d≈∫wiƒôkowego Sombry
    pygame.mixer.music.play()

def play_reinhardt_sound():
    pygame.mixer.init()
    pygame.mixer.music.load('reinhardt.ogg')  # Wprowad≈∫ nazwƒô lub ≈õcie≈ºkƒô do pliku d≈∫wiƒôkowego Sombry
    pygame.mixer.music.play()

def play_widowmaker_sound():
    pygame.mixer.init()
    pygame.mixer.music.load('widowmaker.ogg')
    pygame.mixer.music.play()

def play_ana_sound():
    pygame.mixer.init()
    pygame.mixer.music.load('ana.ogg')
    pygame.mixer.music.play()

def play_zarya_sound():
    pygame.mixer.init()
    pygame.mixer.music.load('Zarya.ogg')
    pygame.mixer.music.play()

def hurhurhurhur():
    pygame.mixer.init()
    pygame.mixer.music.load('hurhur.mp3')
    pygame.mixer.music.play()

def print_welcome_message():
    # Ustaw kolor czerwony
    red_color = "\033[91m"
    # Ustaw rozmiar tekstu na wiƒôkszy
    big_text = "\033[1m"

    # Tekst, kt√≥ry ma byƒá wy≈õwietlony
    message = "Witaj w Paraiso!"

    # Po≈ÇƒÖcz kolory i rozmiar z tekstem
    formatted_message = f"{red_color}{big_text}{message}\033[0m"

    print(formatted_message)

# Atak
def attack_player(player, enemy):
    damage = player.attack()
    if isinstance(player, Character):
        if player.current_mana >= 10:  # Sprawd≈∫, czy gracz ma wystarczajƒÖcƒÖ ilo≈õƒá many
            player.current_mana -= 10  # Odejmij koszt many
            enemy.take_damage(damage)
            print(f"Atakowa≈Çe≈õ {enemy.name} i zada≈Çe≈õ {damage} obra≈ºe≈Ñ!")
        else:
            print("Masz za ma≈Ço many, aby wykonaƒá atak zwyk≈Çy.")
    else:
        enemy.take_damage(damage)
        print(f"Atakowa≈Çe≈õ {enemy.name} i zada≈Çe≈õ {damage} obra≈ºe≈Ñ!")
def use_shield_ability(player):
    if isinstance(player, Reinhardt) and player.current_mana >= 50:
        player.current_mana -= 50  # Odejmij 50 many za u≈ºycie tarczy
        player.activate_shield()  # Wywo≈Çaj metodƒô u≈ºywania tarczy dla Reinhardta
        print(f"{player.name} u≈ºywa tarczy i zyskuje dodatkowƒÖ ochronƒô!")

def use_special_ability(player, enemy):  # Odejmij 30 many za umiejƒôtno≈õƒá specjalnƒÖ
    damage = player.use_special_ability(enemy)
    print("-" * 50)

def enemy_attack(player, enemy):
    damage = enemy.attack()
    player.take_damage(damage)
    print(f"{enemy.name} zadaje {damage} obra≈ºe≈Ñ {player.name}!")
    print("-" * 50)


# Randomowi przeciwnicy
def select_random_enemies():
    enemies = [Bastion(), Kiriko(), Roadhog(), Echo(), Cassidy(), Lucio(), Ashe(), Springtrap(), Hanzo()]
    random.shuffle(enemies)
    return enemies

# Kolej gracza
def player_turn(player, enemy):
    print("Twoja kolej! Wybierz akcjƒô:")
    print("1. " + Fore.LIGHTGREEN_EX + "Atak zwyk≈Çy" + Style.RESET_ALL)
    print("2. " + Fore.LIGHTBLUE_EX + "Umiejƒôtno≈õƒá specjalna" + Style.RESET_ALL)
    print("3. " + Fore.LIGHTYELLOW_EX + "Leczenie" + Style.RESET_ALL)

    if isinstance(player, Reinhardt):
        print("T. " + Fore.LIGHTMAGENTA_EX + "Tarcza" + Style.RESET_ALL)

    choice = input("Podaj numer wybranej akcji: ")

    is_healing = False

    if choice == "1":
        if player.current_mana >= 10:
            attack_player(player, enemy)
        else:
            print("Masz za ma≈Ço many, aby wykonaƒá atak zwyk≈Çy.")
    elif choice == "2":
        use_special_ability(player, enemy)
    elif choice == "3":
        if not is_healing:
            heal_player(player, is_healing)
    elif choice == "T" and isinstance(player, Reinhardt):
        use_shield_ability(player)
    elif choice == "was that the bite of 87":
        play_boss_music()
        boss = Orisa()
        print("Boss, Orisa, pojawi≈Ç siƒô!")

        while not boss.is_defeated() and not player.is_defeated():
            display_health_bar(player)
            display_health_bar(boss)

            is_healing = False

            player_turn(player, boss)
            if boss.is_defeated():
                print(Fore.LIGHTGREEN_EX + "Gratulacje! Pokona≈Çe≈õ Orisƒô i wygra≈Çe≈õ grƒô." + Style.RESET_ALL)
                break
        else:
            print("Nie mo≈ºesz jeszcze przeskoczyƒá do bossa, poniewa≈º nie pokona≈Çe≈õ wystarczajƒÖcej liczby przeciwnik√≥w.")

    elif choice == 'kys':
        rozwal_gre()

def heal_player(player, is_healing):
    if is_healing:
        print(f"{player.name} jest w trakcie leczenia i nie mo≈ºe byƒá zaatakowany.")
    elif player.current_mana >= 35:  # Sprawd≈∫, czy gracz ma wystarczajƒÖcƒÖ ilo≈õƒá many
        player.current_mana -= 35  # Odejmij 35 many za leczenie
        amount_healed = 30
        player.current_health += amount_healed
        if player.current_health > player.max_health:
            player.current_health = player.max_health
        print(f"{player.name} leczy siƒô za {amount_healed} HP.")
    else:
        print(f"{player.name} nie ma wystarczajƒÖco many do u≈ºycia leczenia.")


# Tekst do migania
text_to_blink = "ITS ME"

# Czas trwania migania (w sekundach)
blink_duration = 0.1

# Ilo≈õƒá migniƒôƒá
num_blinks = 10
# wywolanie: mrygnij(text_to_blink, blink_duration, num_blinks)





# G≈Ç√≥wna czƒô≈õƒá gry
def main():
    print("Witaj w grze RPG!")
    print('jak przegrasz niespodzianka...')
    print("Ja chce tylko powiedziec ze zrobienie tego g√≥wna zajelo mi kilkanascie dobrych godzin spedzonych przy komputerze ze spotifyem w tle i biblioteka pythona w przegladarce. zabijcie sie programisci pythona")
    time.sleep(0.5)
    czy_dotknales = input("czy chcesz obejrzec film wprowadzajƒÖcy (T/N)")
    if czy_dotknales == 'T':
        time.sleep(0.3)
        czy_dotknalem_piersi = 'https://clips.twitch.tv/TallEnthusiasticLyrebirdShazBotstix-p-8Gj38w9JLwsCOI'
        webbrowser.open(czy_dotknalem_piersi)
        time.sleep(5)
        czytobyloto = 'https://clips.twitch.tv/BlueVastWallabySSSsss-C3C6b9WveZxKrOfe?tt_medium=clips&tt_content=recommendation'
        webbrowser.open(czytobyloto)
        skonczone = input('Sko≈Ñczy≈Çe≈õ oglƒÖdaƒá? T/N: ')
        if skonczone == 'T':
            pass
        if skonczone == 'N':
            print('W takim razie wylaczam gre ü§∑‚Äç‚ôÇÔ∏è')
            sys.exit

    skip_intro = input("Czy chcesz pominƒÖƒá poczƒÖtkowy dialog? (T/N): ")
    skip_intro = skip_intro.lower()  # Konwersja odpowiedzi na ma≈Çe litery

    if skip_intro == "t":
        show_intro = False
        print('\n')
        clear_console()
        apply_glitch_effect()
        time.sleep(3)
        clear_console()
        blink_random_characters(text_to_blink, num_blinks, blink_duration)
        clear_console()
        time.sleep(1)
    else:
        show_intro = True    
    if show_intro:
        time.sleep(2)
        print('-' * 50)
        gowno()
        print('\n')
        time.sleep(0.3)
        print('...')
        time.sleep(0.2)
        animate_text('Dobra, powinno dzia≈Çaƒá.')
        print('\n')
        time.sleep(0.2)
        animate_text('- Abby: Potrzebujemy pomocy! Ludzie zbuntowali siƒô i wys≈Çali frakcje anty-watch na nasze miasto! Do miasta przedostajƒÖ siƒô roboty i ludzie z franckji anty-watch!')
        print('\n')
        time.sleep(0.5)
        animate_text('- Mike: Witaj Abby! S≈Çyszymy ciƒô. Z tej strony frakcja overwatch. Przyjƒôli≈õmy do wiadomo≈õci potrzebƒô pomocy! Pomoc zostanie wys≈Çana jak najszybciej.')
        print('\n')
        time.sleep(0.3)
        animate_text('- Abby: Witaj Mike! Dziƒôkujemy za pomoc. Wysy≈Çam ci dok≈Çadne koordynaty naszego miasta!')
        time.sleep(1)
        print('\n')
        animated_loading()
        time.sleep(0.3)
        print('\n')
        print('Niepowodzenie.')
        time.sleep(0.2)
        print('\n')
        animate_text('- Abby: B≈ÇƒÖd po≈ÇƒÖczenia, spr√≥buje jeszcze raz.')
        time.sleep(1)
        print('\n')
        animated_loading()
        print('\n')
        print('Wys≈Çano!')
        time.sleep(0.2)
        animate_text('- Abby: Uda≈Ço siƒô! Wys≈Ça≈Çam ci dok≈Çadne koordynaty miasta!')
        print('\n')
        time.sleep(0.3)
        animate_text('- Mike: Przysz≈Ço! Wysy≈Çam jednostki specjalne.')
        print('\n')
        time.sleep(0.2)
        animate_text('- Mike: Abby? Czy twoje miasto to Paraiso?')
        print('\n')
        time.sleep(0.1)
        animate_text('- Abby: Tak.')
        print('\n')
        time.sleep(0.2)
        animate_text('- Mike: Zrozumiano!')
        time.sleep(1)
        print('\n')
        animate_text('Wylatujesz do Paraiso.')
        time.sleep(1)
        print('\n')
        animate_airplane()
        time.sleep(1)
        print('\n')
        cinematic_effect('Przylecia≈Çe≈õ do paraiso...',2)
        time.sleep(2)
        print('\n')
        animate_text('- Mike: Co≈õ tu jest nie tak. Zbyt cicho tutaj jak na tak du≈ºe miasto...')
        time.sleep(2)
        print('\n')
        cinematic_effect('S≈Çyszysz co≈õ w oddali...',2)
        time.sleep(1)
        print('\n')
        animate_text('- Mike: S≈Çyszƒô co≈õ... brzmi jak odg≈Ços burzƒÖcego siƒô budynku')
        print('\n')
        time.sleep(0.5)
        print('\n')
        animate_text('- Mike: Tam siƒô pali! Nie mogƒô wys≈Çaƒá tam bohater√≥w overwatch... Bohaterowie p√≥jdƒÖ w drugƒÖ stronƒô, poniewa≈º tam s≈Çyszƒô wiƒôksze krzyki i tam potrzebna jest pomoc. Stra≈º po≈ºarna ugasi ogien.')
        print('\n')
        time.sleep(0.1)
        cinematic_effect('Mike zadzwoni≈Ç do samolotu overwatch, aby zasygnalizowaƒá gdzie powinni udaƒá siƒô bohaterowie...',2)
        time.sleep(0.3)
        animate_overwatch_logo()
        time.sleep(1)
    print_welcome_message()
    play_intro_music()
    time.sleep(3)
    clear_console()
    display_main_menu()
    choice = input("Wybierz opcjƒô z menu: ")

    if choice == "1":
        pass
    elif choice == "2":
        show_game_rules()
    elif choice == "3":
        display_leaderboard()
    elif choice == "4":
        print("Dziƒôkujemy za grƒô! Do zobaczenia nastƒôpnym razem!")
        sys.exit
    else:
        print("Niepoprawny wyb√≥r. Wybierz opcjƒô z menu.")
        time.sleep(1)
    
    character_choice = input("Wybierz swojƒÖ postaƒá (1. Sombra, 2. Reinhardt, 3. Widowmaker, 4. Ana, 5. Zarya) ")
    
    if character_choice == "1":
        player = Sombra()  # Rozpocznij grƒô z 100 many
        animate_text('Sombra, jeden z najbardziej znanych haker√≥w na ≈õwiecie, wykorzystuje informacje do manipulowania osobami u w≈Çadzy. Jej umiejƒôtno≈õci ukrywania siƒô i wyniszczajƒÖce ataki czyniƒÖ z niej potƒô≈ºnego infiltratora, a tak≈ºe trudny cel do unieruchomienia. ')
        play_sombra_sound()
        print('\n')
        print('-' * 50)
    
    elif character_choice == "2":
        player = Reinhardt()  # Rozpocznij grƒô z 100 many
        play_reinhardt_sound()
        animate_text('Wysoko odznaczony ≈ºo≈Çnierz, Reinhardt Wilhelm, stylizuje siƒô na mistrza minionej epoki, kt√≥ry ≈ºyje wed≈Çug rycerskich kodeks√≥w mƒôstwa, sprawiedliwo≈õci i odwagi. PosiadajƒÖc ‚ÄûaktywnƒÖ wyobra≈∫niƒô‚Äù, lubi je≈õƒá currywurst, jest rozmowny i jest fanem muzyki Davida Hasselhoffa. Codziennie sparinguje z Brigitte, po czym idƒÖ odpoczƒÖƒá do pubu lub tawerny.' )
        print('\n')
        print('-' * 50)
    
    elif character_choice == "3":
        player = Widowmaker()  # Rozpocznij grƒô z 100 many
        play_widowmaker_sound()
        animate_text('Widowmaker to doskona≈Çy zab√≥jca: cierpliwy, bezwzglƒôdnie skuteczny zab√≥jca, kt√≥ry nie okazuje emocji ani wyrzut√≥w sumienia. Kiedy≈õ ta≈Ñczy≈Çy jej jedyne mi≈Ço≈õci i mƒÖ≈º, ale teraz jedynƒÖ rado≈õƒá daje jej moment zab√≥jstwa. Niepowstrzymany zab√≥jca, celownik Widowmakera jest prawdopodobnie najniebezpieczniejszym miejscem na ≈õwiecie.')
        print('\n')
        print('-' * 50)
    
    elif character_choice == "fred":
        player = Freddy()
        hurhurhurhur()
        print('Co? Jak ty to zrobi≈Çe≈õ? Nie mia≈Çe≈õ tego zrobiƒá! Freddy zosta≈Ç uwolniony do ≈õwiata bohater√≥w overwatch! Je≈ºeli przegrasz, freddy zostanie na wolno≈õci!')
        time.sleep(3)
        print('A wiƒôc wybra≈Çe≈õ dobro. Freddy ci pomo≈ºe, a raczej ty jemu! Od teraz kontrolujesz freda, i je≈ºeli on zginie... ty te≈º zginiesz...')
        time.sleep(3)
        print('Freddy teraz ci s≈Çu≈ºy! Jego umiejƒôtno≈õƒá specjalna pozwoli ci ≈Çatwo zabiƒá przeciwnik√≥w, jednak kosztuje ona 100 many. Wykorzystuj jƒÖ ostro≈ºnie, i nie zabijesz niƒÖ orisy.')
        time.sleep(3)
        print('Widzimy siƒô po drugiej stronie...')
    
    elif character_choice == "1234567890":
        print('UWAGA! TO JEST OBIEKT TESTOW! ZNISZCZY ON CALA ROZGRYWKE! JEST TO TYLKO DLA MNIE (CZY DLA OLUSIA :3)')
        time.sleep(0.5)
        test_chcesz = input('Czy na pewno chcesz wybraƒá tƒÖ postaƒá? T/N ')
        if test_chcesz == 'T':
            player = test()
        else:
            player = Sombra()
            play_sombra_sound()
            print('Odpowiedzia≈Çe≈õ N albo ≈∫le odpowiedzia≈Çe≈õ. Domy≈õlnie wybrana postaƒá: Sombra')
    
    elif character_choice == '4':
        player = Ana()
        animate_text('Ana, jedna z za≈Ço≈ºycielek Overwatch, wykorzystuje swoje umiejƒôtno≈õci i wiedzƒô, aby broniƒá swojego domu i ludzi, na kt√≥rych siƒô troszczy. PochodzƒÖca z d≈Çugiej linii odznaczonych ≈ºo≈Çnierzy, Ana wzbudzi≈Ça zaufanie i lojalno≈õƒá u swoich koleg√≥w, a tak≈ºe obdarzy≈Ça swojƒÖ c√≥rkƒô, Fareeha Amari ‚Äì Pharah, intensywnym poczuciem obowiƒÖzku i honoru. Podobnie jak jej c√≥rka, nosi≈Ça tatua≈º przedstawiajƒÖcy Oko Horusa jako symbol ochrony. Podobnie jej znak wywo≈Çawczy w egipskiej armii podczas kryzysu omnickiego brzmia≈Ç ‚ÄûHorus‚Äù. Do dzi≈õ Ana jest uwa≈ºana przez Egipcjan za bohaterkƒô.')
        play_ana_sound()
        print('\n')
        print('-' * 50)
    
    elif character_choice == '5':
        player = Zarya()
        animate_text('Aleksandra Zaryanova to jedna z najsilniejszych kobiet na ≈õwiecie, znana sportsmenka, kt√≥ra w czasie wojny po≈õwiƒôci≈Ça osobistƒÖ chwa≈Çƒô, aby chroniƒá swojƒÖ rodzinƒô, przyjaci√≥≈Ç i kraj. Jako ≈ºo≈Çnierz Rosyjskich Si≈Ç Obronnych jest dumna, ≈ºe ‚Äã‚Äãwykorzystuje swojƒÖ si≈Çƒô, aby chroniƒá tych, kt√≥rych kocha.')
        play_zarya_sound()
        print('\n')
        print('-' * 50)
    
    elif character_choice == "olus":
        player = dodatkowefunkcjepostaci()
        animate_text('olus')
        print('\n')
        print('-'*50)
    else:
        print("Niepoprawny wyb√≥r. Domy≈õlnie wybrano postaƒá Sombra.")
        player = Sombra()  # Domy≈õlnie rozpocznij grƒô z 100 many
        play_sombra_sound()
        description.sombra_opis()
    boss_activated = False
    defeated_enemies = 0
    while True:
        enemies = select_random_enemies()
        for enemy in enemies:
            print(f"Dziki {enemy.name} siƒô pojawi≈Ç!")
            while not enemy.is_defeated() and not player.is_defeated():
                display_health_bar(player)
                display_health_bar(enemy)

                player_turn(player, enemy)
                if enemy.is_defeated():
                    defeated_enemies += 1
                    player.gain_mana(100)  # Dodaj 70 many za pokonanie przeciwnika
                    print(f"Pokona≈Çe≈õ {enemy.name} i zdoby≈Çe≈õ 70 many!")

                    print("-" * 50)
                    break
                enemy_attack(player, enemy)
                print("-" * 50)


        if player.is_defeated():
            clear_console()

            jumpscare_links = [
            "https://www.youtube.com/watch?v=c1fsIquzQ7I",
            "https://www.youtube.com/watch?v=FUaaGInT_R8",
            "https://www.youtube.com/watch?v=uwXy7TYkLv8",
            # Dodaj wiƒôcej link√≥w, je≈õli potrzebujesz
            ]

            jumpscare_url = random.choice(jumpscare_links)
            webbrowser.open(jumpscare_url)  # Liczba pokonanych przeciwnik√≥w
            player_name = get_player_nickname()  # Imiƒô gracza
            update_leaderboard(player_name, defeated_enemies, manas = player.current_mana)
            print(f"Zosta≈Çe≈õ pokonany przez {defeated_enemies} przeciwnik√≥w.")
            display_leaderboard()  # Wy≈õwietl leaderboard
            break
            
        if defeated_enemies >= 10:
            boss_activated = True
            play_boss_music()
            boss = random.choice(bossy)
            print(f"Boss, {boss}, pojawi≈Ç siƒô!")
            if boss == Orisa:
                animate_text('Orisa, skonstruowana przez genialnƒÖ jedenastolatkƒô, Efi Oladele, powsta≈Ça, aby broniƒá miasto Numbani przed wszelkimi zagro≈ºeniami. Kiedy ten duet skutecznie odpar≈Ç atak Piƒô≈õci Zag≈Çady ze Szponu, uznano je za bohaterki narodowe. Teraz Orisa jest gotowa chroniƒá tych, kt√≥rzy jej potrzebujƒÖ, wykorzystujƒÖc swojƒÖ moc w imiƒô dobra.')
                print('\n')
                animate_text(f'{player.name} - No nie wydaje mi sie ze jest ona dobra... doslownie zaatakowala miasto, jak mialaby byc niby dobra?')
                print('\n')
            elif boss == Mauga:
                clear_console()
                animate_text('Wysoki i muskularny, rozmiar i si≈Ça Maugi zosta≈Çy zwiƒôkszone. Przynajmniej wed≈Çug samego Maugi, zanim dokona≈Ç wspomnianej augmentacji, by≈Ç powa≈ºniejszy, zanim zyska≈Ç ‚Äûnowe spojrzenie na ≈ºycie‚Äù. W swojej obecnej postaci Mauga czƒôsto przedstawia siebie jako ‚Äûwielkiego, g≈Çupiego brutala‚Äù. Jest to jednak fasada, poniewa≈º posiada przebieg≈Çe cechy. M√≥wi szybko i swobodnie, ma tendencjƒô do traktowania nieznajomych jak przyjaci√≥≈Ç. Jest bieg≈Çy w walce w zwarciu; Baptiste uwa≈ºa≈Ç go za ‚Äûpodobnego do demona‚Äù; Socjopata i sadysta Mauga szybko prze≈ÇƒÖcza siƒô miƒôdzy ja≈õniejszƒÖ i ciemniejszƒÖ stronƒÖ, choƒá mo≈ºe siƒô w niej zatraciƒá. Tylko Baptisteowi uda≈Ço siƒô go wyprowadziƒá z tego stanu w terenie. Sam Baptiste jest ≈õlepym punktem dla Maugi, kt√≥ry okaza≈Ç mu mi≈Çosierdzie tam, gdzie inaczej by tego nie zrobi≈Ç.')
                print('\n')
                animate_text(f'{player.name} - Zaczyna sie...')
            while not boss.is_defeated() and not player.is_defeated():
                display_health_bar(player)
                display_health_bar(boss)

                player_turn(player, boss)
                if boss.is_defeated():
                    print(Fore.RED + "Gratulacje! Pokona≈Çe≈õ Orisƒô i wygra≈Çe≈õ grƒô.")
                    animated_text("Dziƒôki za grƒô! Do zobaczenia nastƒôpnym razem!", delay=0.2)
                    for _ in range(3):
                        sys.stdout.write("\033[1;31mWygra≈Çe≈õ!\033[0m")
                        sys.stdout.flush()
                        time.sleep(0.5)
                        sys.stdout.write("\r" + " " * 12)  # Wyczy≈õƒá napis
                        sys.stdout.flush()
                        time.sleep(0.5)
                    time.sleep(1)
                    cinematic_effect('Kilka minut p√≥≈∫niej, w samolocie overwatch...',2)
                    print('\n')
                    animate_text('- Mike: Uda≈Ço siƒô! Orisa zosta≈Ça zwyciƒô≈ºona. Ale to nie koniec zmaga≈Ñ overwatch z any-watchem')
                    print('\n')
                    animate_text('- Abby: Dziƒôkujƒô za pomoc! Bez was by to siƒô nie uda≈Ço.')
                    print('\n')
                    animate_text(f'- Mike: {player.name}, bez ciebie by siƒô nie uda≈Ço.')
                    time.sleep(0.5)
                    print('\n')
                    animate_text(f'- {player.name}: Dziƒôkujƒô!')
                    print('\n')
                    print('Wyniki')
                    print('\n')
                    defeated_enemies = defeated_enemies  # Liczba pokonanych przeciwnik√≥w
                    player_name = get_player_nickname()  # Imiƒô gracza
                    update_leaderboard(player_name, defeated_enemies)
                    time.sleep(3)
                    cinematic_effect('Kilka dni p√≥≈∫niej, w siedzibie overwatch:', 2)
                    print('*d≈∫wiƒôk dzwoniƒÖcego telefonu*')
                    time.sleep(0.9)
                    print('\n')
                    animate_text('- Mike: Halo? Kto dzwoni')
                    print('\n')
                    animate_text('- #@$^&*: ten co jajami dzwoni.')
                    print('\n')
                    animate_text('- Mike: Przekomiczne...')
                    time.sleep(2)
                    clear_console()
                    sys.exit()

# Inicjacja gry
if __name__ == "__main__":
    pygame.init()

    screen_width, screen_height = 800, 600
    screen = pygame.display.set_mode((screen_width, screen_height))
    pygame.display.set_caption("Moja Gra")

    background_color = (0, 0, 0)

    def start_game():
        global game_started
        show_loading_screen()
        game_started = True
        clear_console()
        print("Gra odpali≈Ça siƒô w konsoli")
        pygame.display.flip()

    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False
            if event.type == pygame.KEYDOWN:
                if event.key == pygame.K_q:
                    running = False
                elif event.key == pygame.K_s:
                    if not game_started:
                        start_game()

        screen.fill(background_color)

        font = pygame.font.Font(None, 36)
        if game_started:
            start_text = font.render("Gra odpali≈Ça siƒô w konsoli", True, (255, 255, 255))
            time.sleep(5)
            main()
        else:
            start_text = font.render("Start gry (S)", True, (255, 255, 255))
        exit_text = font.render("Wyj≈õcie (Q)", True, (255, 255, 255))
        screen.blit(start_text, (screen_width // 2 - start_text.get_width() // 2, 200))
        screen.blit(exit_text, (screen_width // 2 - exit_text.get_width() // 2, 300))

        pygame.display.flip()
    pygame.quit()